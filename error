# Add a column for sentence ID and condition letter
practice_df['sentence_id'] = practice_df['sounds'].str.extract(r'(p\d)')[0]
practice_df['condition'] = practice_df['sounds'].str.extract(r'p\d([a-d])')[0]

# For each condition (a-d), sample one random item
from random import sample

practice_selected_rows = []

for cond in ['a', 'b', 'c', 'd']:
    subset = practice_df[practice_df['condition'] == cond]
    if len(subset) == 0:
        raise ValueError(f"No items found for condition {cond} in practice set!")
    row = subset.sample(1)
    practice_selected_rows.append(row)

# Combine and shuffle
practice_df_selected = pd.concat(practice_selected_rows).sample(frac=1).reset_index(drop=True)
practice_selected_rows = practice_df_selected.to_dict(orient='records')
