from psychopy.hardware import joystick
from psychopy import core

# Set the backend
joystick.backend = 'pyglet'

# Initialize joystick
nJoysticks = joystick.getNumJoysticks()
if nJoysticks > 0:
    joy = joystick.Joystick(0)
    print("Joystick detected:", joy.getName())
else:
    print("No joystick detected!")
    core.quit()

print("Press buttons on the gamepad to see their index.")

# Loop to monitor button states
while True:
    buttons = joy.getAllButtons()
    print(buttons)  # This will print a list like [0, 0, 1, 0, ...]
    core.wait(0.1)  # Small delay so output is readable
