# Get current time in the trial
now = trialClock.getTime()

# Send triggers at the correct times (one-shot per code)
for i, (target_time, code) in enumerate(zip(trigger_delays_sec, trigger_codes)):
    if not trigger_sent[i] and now >= target_time:
        send_trigger(code)
        print(f"[DEBUG] Trigger {code} sent at {now*1000:.1f} ms (expected {target_time*1000:.1f} ms)")
        trigger_sent[i] = True
